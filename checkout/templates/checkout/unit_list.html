{% extends 'checkout/base.html' %} {% block content %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Device name</th>
            <th scope="col">Revision</th>
            <th scope="col">IP Address</th>
            <th scope="col">Current User</th>
            <th scope="col">Availability</th>
        </tr>
    </thead>
    <tbody>
        {% for unit in units %}
        <tr>
            <td>{{forloop.counter}}</td>
            <td>{{unit.name}}</td>
            <td>{{unit.revision}}</td>
            <td>{{unit.ip_address}}</td>
            <td id="current_user_{{ unit.pk }}">{{unit.current_user}}</td>
            <td >
                <div>
                    <span id="availability_{{unit.pk}}">
                    {{unit.get_availability_display}}   
                    </span>
                    {% if unit.availability != "in_use" %} 
                        <a class="editor-button btn btn-default btn-sm" 
                        href="" 
                        data-unitpk="{{ unit.pk }}" 
                        data-userid="{{request.user.id}}"
                        data-url="{% url 'update_availability1' %}">
                            <span class="glyphicon glyphicon-thumbs-up"></span>
                        </a>
                    {% elif unit.current_user.id == request.user.id and unit.availability == inuse %}
                        <a class="editor-button btn btn-default btn-sm" href="" 
                        data-unitpk="{{ unit.pk }}" 
                        data-userid="{{request.user.id}}"
                        data-url="{% url 'update_availability1' %}">
                            <span class="glyphicon glyphicon-eject"></span>
                        </a>
                    {% endif %}
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
